<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apikai Lodge | Parque Acu√°tico Amaz√≥nico</title>

  <!-- SEO -->
  <meta name="description" content="Apikai Lodge es un parque acu√°tico amaz√≥nico ubicado en la v√≠a Miss Ecuador, a 12 km de Shushufindi. Piscinas, hidromasaje, √°reas deportivas, cevicher√≠a, platos a la carta y coliseo para eventos con producci√≥n de Gaby Garz√≥n Eventos.">
  <meta name="author" content="Apikai Lodge & Gaby Garz√≥n Eventos">

  <!-- Google Font estilo cartoon -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        crossorigin="anonymous" />

  <style>
    :root {
      --amarillo: #ffd65a;
      --naranja: #ff9b4a;
      --azul: #4cc2ff;
      --verde: #6ee7b7;
      --azul-fondo: #02101f;
    }

    body {
      font-family: "Baloo 2", sans-serif;
      background: radial-gradient(circle at top, #173a63 0, var(--azul-fondo) 40%, #020617 100%);
      color: #f9fafb;
    }

    .nav-blur {
      backdrop-filter: blur(14px);
      background: rgba(2, 6, 23, 0.9);
      border-bottom: 1px solid rgba(148, 163, 184, 0.25);
    }

    .hero-bg {
      background-image:
        radial-gradient(circle at 0% 0%, rgba(255, 214, 90, 0.4), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(76, 194, 255, 0.35), transparent 60%),
        linear-gradient(180deg, rgba(2, 6, 23, 0.35), rgba(2, 6, 23, 0.8)),
        url("apikai-hero.jpg");
      background-size: cover;
      background-position: center;
    }

    .btn-pill {
      border-radius: 999px;
      padding: 0.8rem 1.6rem;
      font-weight: 800;
      letter-spacing: 0.12em;
      font-size: 0.75rem;
      text-transform: uppercase;
    }

    .btn-primario {
      background: linear-gradient(135deg, var(--amarillo), var(--naranja));
      color: #0f172a;
      box-shadow: 0 8px 25px rgba(255,195,90,0.6);
      transition: 0.2s;
    }
    .btn-primario:hover {
      filter: brightness(1.05);
      transform: translateY(-2px);
    }

    .card-gomita {
      background: linear-gradient(145deg, #050a1f, #060a18);
      border-radius: 26px;
      border: 2px solid rgba(148, 163, 184, 0.25);
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.9);
    }

    .gallery-img {
      border-radius: 22px;
      transition: 0.3s;
      box-shadow: 0 12px 30px rgba(0,0,0,0.7);
      cursor: pointer;
    }
    .gallery-img:hover {
      transform: translateY(-4px) scale(1.02);
      filter: brightness(1.05);
    }

    /* ANIMACI√ìN FLOAT PARA LIGHTBOX */
    @keyframes floatZoom {
      0% { transform: scale(0.9) translateY(10px); opacity: 0; }
      100% { transform: scale(1) translateY(0); opacity: 1; }
    }
    .animate-floatZoom {
      animation: floatZoom 0.35s ease-out;
    }
  </style>
</head>

<body>

<!-- NAVBAR -->
<header class="sticky top-0 z-50 nav-blur">
  <nav class="max-w-6xl mx-auto flex items-center justify-between px-4 py-3">
    <div class="flex items-center gap-3">
      <!-- LOGO GRANDE -->
      <img src="apikai-logo.png"
           class="w-24 h-24 rounded-full border-2 border-sky-400 shadow-xl"
           alt="Logo Apikai Lodge" />
      <div>
        <p class="font-extrabold text-2xl">Apikai Lodge</p>
        <p class="text-[12px] text-sky-300 tracking-wider">Parque Acu√°tico ¬∑ Amazon√≠a</p>
      </div>
    </div>

    <div class="hidden md:flex items-center gap-6 text-[14px] font-semibold">
      <a href="#inicio" class="hover:text-sky-300">Inicio</a>
      <a href="#galeria" class="hover:text-sky-300">Galer√≠a</a>
      <a href="#contacto" class="hover:text-sky-300">Contacto</a>
    </div>

    <a href="#reservas" class="hidden md:inline-flex btn-pill btn-primario">
      RESERVAR
    </a>
  </nav>
</header>

<!-- HERO -->
<section id="inicio" class="hero-bg min-h-[80vh] flex items-center px-4 py-20">
  <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-10">
    <div class="space-y-6">
      <div class="inline-flex items-center gap-2 bg-emerald-300 text-slate-900 px-4 py-1 rounded-full text-xs font-bold">
        üí¶ Piscinas ¬∑ üå¥ Amazon√≠a ¬∑ üç§ Cevicher√≠a
      </div>

      <h1 class="text-5xl font-extrabold leading-tight">
        Vive el para√≠so amaz√≥nico en <span class="text-sky-300">Apikai Lodge</span>.
      </h1>

      <p class="text-sky-100/95 text-base">
        Parque acu√°tico en la Amazon√≠a ecuatoriana: piscinas, hidromasaje,
        √°reas deportivas, cevicher√≠a, platos a la carta y coliseo para tus eventos.
      </p>

      <div class="flex gap-3 flex-wrap mt-4">
        <a href="#reservas" class="btn-pill btn-primario">Reservar Ahora ü§©</a>
        <a href="#galeria" class="btn-pill border border-sky-400 text-sky-200">Ver Fotos üì∏</a>
        <a href="#juego" class="btn-pill bg-sky-500 text-slate-900">Jugar en Apikai üéÆ</a>
      </div>
    </div>
  </div>
</section>

<!-- EXPERIENCIAS -->
<section class="py-14 bg-slate-950">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl font-extrabold text-center mb-6">Experiencias en Apikai üå¥</h2>

    <div class="grid md:grid-cols-3 gap-6">
      <div class="card-gomita p-5">
        <img src="apikai-piscinas.jpg" class="gallery-img h-40 w-full object-cover mb-4" alt="Piscinas Apikai Lodge" />
        <h3 class="text-lg font-semibold text-sky-200 mb-2">Piscinas & Hidromasaje</h3>
        <p class="text-sky-100/90 text-sm">Agua cristalina, clima amaz√≥nico y diversi√≥n garantizada.</p>
      </div>

      <div class="card-gomita p-5">
        <img src="apikai-deportes.jpg" class="gallery-img h-40 w-full object-cover mb-4" alt="√Åreas deportivas Apikai Lodge" />
        <h3 class="text-lg font-semibold text-emerald-200 mb-2">√Åreas Deportivas</h3>
        <p class="text-sky-100/90 text-sm">F√∫tbol, v√≥ley, campeonatos e integraciones para grupos.</p>
      </div>

      <div class="card-gomita p-5">
        <img src="apikai-coliseo.jpg" class="gallery-img h-40 w-full object-cover mb-4" alt="Coliseo Apikai Lodge" />
        <h3 class="text-lg font-semibold text-rose-200 mb-2">Coliseo 300 personas</h3>
        <p class="text-sky-100/90 text-sm">Perfecto para shows, fiestas, graduaciones y grandes eventos.</p>
      </div>
    </div>
  </div>
</section>

<!-- GASTRONOM√çA -->
<section class="py-14 bg-slate-900">
  <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-8">
    <div class="space-y-4">
      <h2 class="text-3xl font-extrabold text-amber-300">Cevicher√≠a & Platos a la Carta üç§</h2>
      <p class="text-sky-100/90 text-sm">
        Sabor amaz√≥nico en cada plato, preparado al momento para tu grupo.
      </p>
      <a href="#reservas" class="btn-pill btn-primario">Consultar Men√∫ üçΩÔ∏è</a>
    </div>

    <div class="grid grid-cols-2 gap-4">
      <img src="apikai-ceviches.jpg" class="gallery-img h-32 w-full object-cover" alt="Ceviches Apikai">
      <img src="apikai-restaurant.jpg" class="gallery-img h-32 w-full object-cover" alt="Platos Apikai">
      <img src="apikai-snacks.jpg" class="gallery-img h-32 w-full object-cover" alt="Snacks Apikai">
      <img src="apikai-bar.jpg" class="gallery-img h-32 w-full object-cover" alt="Bar Apikai">
    </div>
  </div>
</section>

<!-- GALER√çA -->
<section id="galeria" class="py-14 bg-slate-950">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-3xl font-extrabold text-center mb-4">Galer√≠a üì∏</h2>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <img src="apikai-galeria-1.jpg" class="gallery-img h-32 w-full object-cover" alt="">
      <img src="apikai-galeria-2.jpg" class="gallery-img h-32 w-full object-cover" alt="">
      <img src="apikai-galeria-3.jpg" class="gallery-img h-32 w-full object-cover" alt="">
      <img src="apikai-galeria-4.jpg" class="gallery-img h-32 w-full object-cover" alt="">
      <img src="apikai-galeria-5.jpg" class="gallery-img h-32 w-full object-cover" alt="">
      <img src="apikai-galeria-6.jpg" class="gallery-img h-32 w-full object-cover" alt="">
      <img src="apikai-galeria-7.jpg" class="gallery-img h-32 w-full object-cover" alt="">
      <img src="apikai-galeria-8.jpg" class="gallery-img h-32 w-full object-cover" alt="">
    </div>
  </div>
</section>

<!-- FORMULARIO DE RESERVAS -->
<section id="reservas" class="py-14 bg-slate-950">
  <div class="max-w-3xl mx-auto px-4">
    <h2 class="text-3xl font-extrabold text-center mb-4">Reservas & Cotizaciones üìÖ</h2>
    <p class="text-center text-sm text-sky-100/80 mb-8">
      Llena el formulario y te contactaremos por WhatsApp para definir todos los detalles.
    </p>

    <form
      name="reservas-apikai"
      method="POST"
      data-netlify="true"
      action="/gracias.html"
      class="card-gomita p-6 space-y-4"
    >
      <input type="hidden" name="form-name" value="reservas-apikai">

      <label>
        <span>Nombre completo</span>
        <input type="text" name="nombre" required class="w-full p-2 bg-slate-900 border border-sky-700 rounded-xl mt-1">
      </label>

      <label>
        <span>WhatsApp</span>
        <input type="text" name="whatsapp" required class="w-full p-2 bg-slate-900 border border-sky-700 rounded-xl mt-1">
      </label>

      <label>
        <span>Email (opcional)</span>
        <input type="email" name="email" class="w-full p-2 bg-slate-900 border border-sky-700 rounded-xl mt-1">
      </label>

      <label>
        <span>Tipo de plan</span>
        <select name="tipo_reserva" required class="w-full p-2 bg-slate-900 border border-sky-700 rounded-xl mt-1">
          <option value="">Selecciona‚Ä¶</option>
          <option value="tarde_piscina">Tarde de piscina</option>
          <option value="actividad_deportiva">Actividad deportiva</option>
          <option value="evento_social_gaby_garzon">Evento social</option>
          <option value="concierto_show">Show o concierto</option>
          <option value="retiro_iglesia">Retiro de iglesia</option>
          <option value="visita_escolar">Visita escolar</option>
          <option value="empresa_organizacion">Evento empresarial</option>
          <option value="uso_coliseo">Uso del coliseo</option>
        </select>
      </label>

      <label>
        <span>Fecha del evento</span>
        <input type="date" name="fecha_evento" required class="w-full p-2 bg-slate-900 border border-sky-700 rounded-xl mt-1">
      </label>

      <label>
        <span>Mensaje</span>
        <textarea name="mensaje" rows="4" class="w-full p-2 bg-slate-900 border border-sky-700 rounded-xl mt-1"></textarea>
      </label>

      <button type="submit" class="btn-pill btn-primario w-full">Enviar solicitud üöÄ</button>
    </form>
  </div>
</section>

<!-- CONTACTO -->
<section id="contacto" class="py-14 bg-slate-900">
  <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-10">
    <div>
      <h2 class="text-2xl font-extrabold mb-4 text-sky-200">Contacto directo</h2>

      <ul class="text-sm text-sky-100 space-y-2 mb-6 leading-relaxed">
        <li>üìç V√≠a Miss Ecuador, a 12 km de Shushufindi.</li>
        <li>üìû Tel√©fonos:<br>
          <a href="https://wa.me/593999630862?text=Hola%20Apikai%20Lodge,%20quiero%20informaci√≥n%20para%20reservar%20o%20cotizar%20un%20evento."
             target="_blank"
             class="text-amber-300 underline decoration-dotted">
            0999630862 (WhatsApp)
          </a><br>
          <a href="https://wa.me/593992004343?text=Hola%20Apikai%20Lodge,%20vengo%20desde%20la%20p√°gina%20web%20y%20quiero%20hacer%20una%20consulta%20o%20reserva."
             target="_blank"
             class="text-amber-300 underline decoration-dotted">
            0992004343 (WhatsApp)
          </a>
        </li>
      </ul>

      <div class="flex flex-wrap gap-3 mb-3">
        <a href="https://maps.app.goo.gl/pG3ebMvo7drzxAjz9?g_st=ic"
           target="_blank"
           class="inline-flex items-center gap-2 px-3 py-2 bg-slate-800 rounded-full text-sky-200 text-sm">
          <i class="fa-solid fa-location-dot text-green-400 text-xl"></i>
          Google Maps
        </a>

        <a href="https://www.facebook.com/profile.php?id=100092321450938"
           target="_blank"
           class="inline-flex items-center gap-2 px-3 py-2 bg-slate-800 rounded-full text-sky-200 text-sm">
          <i class="fa-brands fa-facebook text-blue-400 text-xl"></i>
          Facebook Apikai
        </a>
      </div>

      <div class="flex flex-wrap gap-3 text-sm">
        <a href="https://www.tiktok.com/@apikairegalodedios_4?_r=1&_t=ZM-91i8KLubcG8"
           target="_blank"
           class="inline-flex items-center gap-2 px-3 py-2 bg-slate-800 rounded-full text-sky-200">
          <i class="fa-brands fa-tiktok text-xl"></i>
          TikTok Apikai
        </a>

        <a href="https://www.tiktok.com/@gabygarzon_eventos?_r=1&_t=ZM-91i85uavn32"
           target="_blank"
           class="inline-flex items-center gap-2 px-3 py-2 bg-slate-800 rounded-full text-sky-200">
          <i class="fa-brands fa-tiktok text-xl"></i>
          TikTok Gaby Garz√≥n Eventos
        </a>
      </div>
    </div>

    <div class="card-gomita p-4">
      <p class="font-semibold text-sky-200 text-sm mb-2">Ubicaci√≥n en mapa</p>
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3977.62479972271!2d-76.64969292427336!3d-0.17470393543004665!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91d6aac46c5ee79b%3A0x5e30f68bf48e1c16!2sApikai%20Regalo%20de%20Dios!5e0!3m2!1ses-419!2sec!4v1700950000000!5m2!1ses-419!2ec"
        width="100%"
        height="280"
        style="border:0; border-radius: 20px;"
        loading="lazy"
        allowfullscreen>
      </iframe>
    </div>
  </div>
</section>

<!-- JUEGO AL FINAL -->
<section id="juego" class="py-14 bg-slate-950">
  <div class="max-w-4xl mx-auto px-4">
    <h2 class="text-3xl font-extrabold text-center mb-3">Juego: Piscina Rompe-bloques üéÆ</h2>
    <p class="text-center text-sm text-sky-100/80 mb-6">
      Mueve la barra y mant√©n la pelotita ‚Äúflotando‚Äù mientras destruyes los bloques.
    </p>

    <div class="card-gomita p-4 flex justify-center">
      <canvas id="poolGame" width="320" height="480" class="bg-slate-900 rounded-2xl border border-sky-500"></canvas>
    </div>

    <p class="text-[11px] text-center text-sky-300/80 mt-3">
      Controles: Flechas izquierda/derecha en PC. En celular, toca a la izquierda o derecha de la barra.
    </p>
  </div>
</section>

<!-- LIGHTBOX -->
<div id="lightbox"
     class="fixed inset-0 bg-black/80 hidden items-center justify-center z-50 px-4">
  <button id="lightbox-close"
          class="absolute top-4 right-4 bg-slate-900/80 border border-sky-400 text-sky-100 rounded-full w-10 h-10 flex items-center justify-center text-xl">
    ‚úï
  </button>
  <img id="lightbox-img"
       src=""
       class="max-h-[80vh] max-w-[90vw] rounded-3xl shadow-2xl border border-sky-400/60 animate-floatZoom">
</div>

<!-- FOOTER -->
<footer class="bg-slate-950 border-t border-sky-700/30">
  <p class="text-center text-[11px] text-sky-400 py-4">
    ¬© <span id="year"></span> Apikai Lodge ¬∑ Amazon√≠a Ecuatoriana
  </p>
</footer>

<!-- WIDGET WHATSAPP FLOTANTE -->
<div class="fixed right-5 bottom-5 z-50">
  <!-- Bot√≥n redondo -->
  <button id="wsp-toggle"
          class="w-14 h-14 rounded-full bg-emerald-500 flex items-center justify-center shadow-2xl text-white text-3xl">
    <i class="fa-brands fa-whatsapp"></i>
  </button>

  <!-- Ventana de saludo -->
  <div id="wsp-panel"
       class="hidden absolute bottom-16 right-0 w-72 card-gomita p-4 text-sm">
    <p class="font-semibold text-sky-100 mb-2">
      üëã ¬°Hola! Somos Apikai Lodge
    </p>
    <p class="text-sky-100/80 text-xs mb-3">
      Cu√©ntanos qu√© quieres reservar: paseo de piscinas, evento con Gaby Garz√≥n Eventos,
      integraci√≥n deportiva o algo especial.
    </p>

    <div class="space-y-2 text-xs">
      <a href="https://wa.me/593999630862?text=Hola%20Apikai%20Lodge,%20quiero%20reservar%20o%20cotizar%20un%20evento%20en%20el%20parque%20acu%C3%A1tico."
         target="_blank"
         class="w-full inline-flex items-center justify-between px-3 py-2 rounded-xl bg-emerald-500/90 text-slate-900 font-semibold">
        <span>Escribir al 0999630862</span>
        <i class="fa-brands fa-whatsapp"></i>
      </a>

      <a href="https://wa.me/593992004343?text=Hola%20Apikai%20Lodge,%20vengo%20desde%20la%20web%20y%20quiero%20informaci%C3%B3n%20para%20reservar."
         target="_blank"
         class="w-full inline-flex items-center justify-between px-3 py-2 rounded-xl bg-emerald-400/90 text-slate-900 font-semibold">
        <span>Escribir al 0992004343</span>
        <i class="fa-brands fa-whatsapp"></i>
      </a>
    </div>

    <button id="wsp-close"
            class="mt-3 text-[11px] text-sky-300 underline decoration-dotted w-full text-center">
      Cerrar
    </button>
  </div>
</div>

<!-- SCRIPT FINAL -->
<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  // LIGHTBOX FOTOS
  const lightbox = document.getElementById("lightbox");
  const imgLightbox = document.getElementById("lightbox-img");
  const closeLightbox = document.getElementById("lightbox-close");
  const galleryImages = document.querySelectorAll(".gallery-img");

  galleryImages.forEach(img => {
    img.addEventListener("click", () => {
      imgLightbox.src = img.src;
      lightbox.classList.remove("hidden");
      lightbox.classList.add("flex");
      imgLightbox.classList.remove("animate-floatZoom");
      void imgLightbox.offsetWidth;
      imgLightbox.classList.add("animate-floatZoom");
    });
  });

  closeLightbox.addEventListener("click", () => {
    lightbox.classList.add("hidden");
  });

  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) {
      lightbox.classList.add("hidden");
    }
  });

  // JUEGO ROMPE-BLOQUES (tipo piscina)
  const canvas = document.getElementById("poolGame");
  const ctx = canvas.getContext("2d");

  let x = canvas.width / 2;
  let y = canvas.height - 30;
  let dx = 2;
  let dy = -2;
  const ballRadius = 7;

  const paddleHeight = 10;
  const paddleWidth = 60;
  let paddleX = (canvas.width - paddleWidth) / 2;

  let rightPressed = false;
  let leftPressed = false;

  const brickRowCount = 4;
  const brickColumnCount = 6;
  const brickWidth = 45;
  const brickHeight = 16;
  const brickPadding = 8;
  const brickOffsetTop = 40;
  const brickOffsetLeft = 15;

  let bricks = [];
  for (let c = 0; c < brickColumnCount; c++) {
    bricks[c] = [];
    for (let r = 0; r < brickRowCount; r++) {
      bricks[c][r] = { x: 0, y: 0, status: 1 };
    }
  }

  let lives = 3;

  document.addEventListener("keydown", keyDownHandler, false);
  document.addEventListener("keyup", keyUpHandler, false);
  canvas.addEventListener("touchstart", handleTouch, false);
  canvas.addEventListener("touchmove", handleTouch, false);

  function keyDownHandler(e) {
    if (e.key === "Right" || e.key === "ArrowRight") {
      rightPressed = true;
    } else if (e.key === "Left" || e.key === "ArrowLeft") {
      leftPressed = true;
    }
  }

  function keyUpHandler(e) {
    if (e.key === "Right" || e.key === "ArrowRight") {
      rightPressed = false;
    } else if (e.key === "Left" || e.key === "ArrowLeft") {
      leftPressed = false;
    }
  }

  function handleTouch(e) {
    const rect = canvas.getBoundingClientRect();
    const touchX = e.touches[0].clientX - rect.left;
    paddleX = touchX - paddleWidth / 2;
    e.preventDefault();
  }

  function collisionDetection() {
    for (let c = 0; c < brickColumnCount; c++) {
      for (let r = 0; r < brickRowCount; r++) {
        const b = bricks[c][r];
        if (b.status === 1) {
          if (
            x > b.x &&
            x < b.x + brickWidth &&
            y > b.y &&
            y < b.y + brickHeight
          ) {
            dy = -dy;
            b.status = 0;
          }
        }
      }
    }
  }

  function drawBall() {
    ctx.beginPath();
    ctx.arc(x, y, ballRadius, 0, Math.PI * 2);
    ctx.fillStyle = "#4CC2FF";
    ctx.fill();
    ctx.closePath();
  }

  function drawPaddle() {
    ctx.beginPath();
    if (ctx.roundRect) {
      ctx.roundRect(paddleX, canvas.height - paddleHeight - 10, paddleWidth, paddleHeight, 6);
    } else {
      ctx.rect(paddleX, canvas.height - paddleHeight - 10, paddleWidth, paddleHeight);
    }
    ctx.fillStyle = "#22C55E";
    ctx.fill();
    ctx.closePath();
  }

  function drawBricks() {
    for (let c = 0; c < brickColumnCount; c++) {
      for (let r = 0; r < brickRowCount; r++) {
        if (bricks[c][r].status === 1) {
          const brickX = c * (brickWidth + brickPadding) + brickOffsetLeft;
          const brickY = r * (brickHeight + brickPadding) + brickOffsetTop;
          bricks[c][r].x = brickX;
          bricks[c][r].y = brickY;
          ctx.beginPath();
          if (ctx.roundRect) {
            ctx.roundRect(brickX, brickY, brickWidth, brickHeight, 6);
          } else {
            ctx.rect(brickX, brickY, brickWidth, brickHeight);
          }
          ctx.fillStyle = r % 2 === 0 ? "#38BDF8" : "#F97316";
          ctx.fill();
          ctx.closePath();
        }
      }
    }
  }

  function drawLives() {
    ctx.font = "12px 'Baloo 2', system-ui";
    ctx.fillStyle = "#E5E7EB";
    ctx.fillText("Vidas: " + lives, 8, 16);
  }

  function resetBall() {
    x = canvas.width / 2;
    y = canvas.height - 30;
    dx = 2;
    dy = -2;
    paddleX = (canvas.width - paddleWidth) / 2;
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawBricks();
    drawBall();
    drawPaddle();
    drawLives();
    collisionDetection();

    if (x + dx > canvas.width - ballRadius || x + dx < ballRadius) {
      dx = -dx;
    }

    if (y + dy < ballRadius) {
      dy = -dy;
    } else if (y + dy > canvas.height - ballRadius - 10) {
      if (x > paddleX && x < paddleX + paddleWidth) {
        dy = -dy;
      } else if (y + dy > canvas.height - ballRadius) {
        lives--;
        if (!lives) {
          lives = 3;
          for (let c = 0; c < brickColumnCount; c++) {
            for (let r = 0; r < brickRowCount; r++) {
              bricks[c][r].status = 1;
            }
          }
        }
        resetBall();
      }
    }

    if (rightPressed && paddleX < canvas.width - paddleWidth) {
      paddleX += 4;
    } else if (leftPressed && paddleX > 0) {
      paddleX -= 4;
    }

    x += dx;
    y += dy;

    requestAnimationFrame(draw);
  }

  if (canvas && ctx) {
    draw();
  }

  // WIDGET WHATSAPP FLOTANTE
  const wspToggle = document.getElementById("wsp-toggle");
  const wspPanel = document.getElementById("wsp-panel");
  const wspClose = document.getElementById("wsp-close");

  wspToggle.addEventListener("click", (e) => {
    e.stopPropagation();
    wspPanel.classList.toggle("hidden");
  });

  wspClose.addEventListener("click", (e) => {
    e.stopPropagation();
    wspPanel.classList.add("hidden");
  });

  document.addEventListener("click", (e) => {
    if (!wspPanel.classList.contains("hidden")) {
      const clickInsidePanel = wspPanel.contains(e.target);
      const clickOnButton = wspToggle.contains(e.target);
      if (!clickInsidePanel && !clickOnButton) {
        wspPanel.classList.add("hidden");
      }
    }
  });
</script>

</body>
</html>
